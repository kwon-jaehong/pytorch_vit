# Terraform 코드 구조

내가 테라폼을 사용해서 AWS에 구성하려는 인프라 구성도는 이렇다.

<p align="center">
  <img src="../image/aws_%EA%B5%AC%EC%A1%B0_full.png" width="70%" height="70%">
</p>
<p align="center"> [ OCR 서비스 AWS 다이어그램 ] </p>


*선택 사항
aws.auto.tfvars
aws-cli configure가 구성되어 있다면 구지 안써도 된다




![Alt text](../image/terraform_provider.png)
**provider** 인프라 구성 요소를 관리하는 플러그인
파이썬으로 치자면, pandas와 같은 패키지라고 보면 된다.
0-provider 기준으로

terraform init를 치면, 다음과 같이 
현재 작업폴더 기준으로, `.terraform`폴더가 생기고, aws,helm,kubectl provider들이 설치된다.


https://www.youtube.com/watch?v=nIIxexG7_a8&list=PLiMWaCMwGJXkeBzos8QuUxiYT6j8JYGE5








예를 들면, 군대에서 쓰는 인트라넷 구성이라고 보면 된다
군대 인트라넷은 우리가 흔히 쓰는 인터넷으로 외부 접속/접근 할 수 없는 격리된 사설 네트워크이다
군대 인트라넷은 일반적인 인터넷과는 다르게, 외부에서의 접속을 제한하고 내부에서만 사용 가능한 IP 주소 대역을 사용합니다. 이를 통해 군사 기밀 정보를 보호하고, 외부에서의 해킹 및 공격을 예방할 수 있습니다. 또한, 군대 인트라넷은 군사 조직 내에서 통신 및 협업을 원활하게 하기 위해 사용됩니다.



AWS VPC에서 인터넷 게이트웨이는 VPC 내부의 인스턴스나 서비스가 인터넷과 통신하기 위한 게이트웨이 역할을 합니다. 인터넷 게이트웨이는 VPC의 라우팅 테이블에 연결되어, 특정 대상 주소(예: 인터넷으로 가는 대상 주소)로 가는 트래픽을 인터넷 게이트웨이로 전달합니다.

인터넷 게이트웨이를 사용하면 VPC 내부의 인스턴스나 서비스가 인터넷과 통신할 수 있게 되므로, 예를 들어 웹 서버를 운영하는 인스턴스가 인터넷으로부터 요청을 받거나, 인터넷상의 데이터베이스와 연결할 수 있습니다. 또한, 인터넷 게이트웨이를 통해 VPC 내부의 인스턴스나 서비스가 다른 AWS 서비스나 인터넷에서 제공되는 서비스와 연결되는 것도 가능합니다.

인터넷 게이트웨이는 VPC 내부에서 인터넷으로 가는 트래픽을 보내는 역할을 하기 때문에, VPC의 보안 그룹과 네트워크 ACL 등을 사용하여 인터넷 게이트웨이와 연결된 인스턴스의 보안을 강화할 수 있습니다.


-----------


노드 그룹 = 컴퓨터
admin 노드 그룹()



테라폼 소스코드 넘버링, 코드 주석